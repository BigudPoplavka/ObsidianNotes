Дерево грамматического разбора предложения.
[[Процесс генерации объектного кода №2]]
![[Pasted image 20220406174640.png]]

На каждом шаге процесса разбора распознается самая левая подстрока входного текста, которая может быть интерпретирована в соответствии с каким-либо из правил грамматики. В методе операторного предшествования подобное распознавание осуществляется, когда подстрока входного текста редуцируется к некоторому нетерминальному символу <N1>. 

В методе рекурсивного спуска распознавание происходит в тот момент, когда соответствующая процедура заканчивает свою работу с признаком успешного завершения. Таким образом, в процессе грамматического разбора всегда будет сначала распознан идентификатор VALUE в качестве нетерминального символа <id-list>, а уже потом предложение в целом будет распознано в качестве нетерминального символа read.

![[Pasted image 20220406175927.png]]

На рис. 8.1(в) изображен объектный код, который должен быть сгенерирован для предложения READ. Этот код представляет собой вызов подпрограммы XREAD, которая должна содержаться в стандартной библиотеке компилятора. Эта подпрограмма может быть вызвана также любой программой, желающей выполнить операцию чтения.

Подпрограмма XREAD связывается с генерируемой программой  
связывающим загрузчиком или же редактором связей. (Компилятор  
должен включить в объектную программу достаточно информации для  
определения всех необходимых связей.)

Подобная техника обычно используется при компиляции предложений, выполняющих относительно сложные функции. Поскольку подпрограмма XREAD может быть использована для любых операций чтения, она должна иметь параметры, определяющие детали этой операции. В данном случае список параметров подпрограммы XREAD помещается непосредственно за инструкцией JSUB, которая ее вызывает. Первое слово в этом списке параметров содержит величину, определяющую количество переменных, которым должно быть присвоено значение в результате осуществления операции чтения. В последующих словах содержаться адреса этих переменных. Таким образом, вторая строка на рис. 8.1(в) определяет, что должно быть прочитано значение одной переменной, а третья строка содержит адрес.  

Адрес первого слова списка параметров будет автоматически помещен в  регистр L при выполнении инструкции JSUB. Подпрограмма XREAD может использовать этот адрес для определения своих параметров и, сложив содержимое регистра L с длиной списка параметров, определить значение адреса возврата.  

На рис. 8.1 (б) представлен набор программ, которые могут использоваться для генерации объектного кода. Первые две программы соответствуют двум альтернативам для нетерминального символа <id-list> в грамматическом правиле 6 на рис. 7.3. В любом случае спецификатор лексемы S(id) для очередного идентификатора, являющегося элементом <id-list>, включается в список, используемый программами генерации кода. Соответствующая переменная LISTCOUNT увеличивается на единицу, чтобы отразить включение в список нового идентификатора.  

После того как нетерминальный символ <id-list> будет разобран, список будет содержать спецификаторы лексем для всех идентификаторов, содержащихся в <id-list>. Когда будет распознано предложение <read>, эти спецификаторы лексем будут удалены из списка и использованы для генерации объектного кода, соответствующего операции чтения READ.  

Следует обратить внимание, что в процессе генерации дерева грамматического разбора, изображенного на рис. 8.1(а), вначале распознается <id-list>, а потом уже <read>. На каждом шаге грамматического разбора вызывается соответствующая программа генерации объектного кода.
